<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Grupo Alvorar - Indicadores</title>

    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="../css/indicadores.css">
    <link rel="shortcut icon" href="../img/logo Evolui.jpg" type="image/x-icon">
    

    
</head>

<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer" aria-live="polite"></div>

    <!-- ENHANCED SIDEBAR - INICIA COLAPSADA -->
    <nav class="sidebar collapsed" id="sidebar" role="navigation" aria-label="Menu principal">
        <div class="logo-container">
            <div class="logo">
                <img src="../img/Logo Alvorar.png" alt="">
            </div>
        </div>
        
        <ul role="menubar">
            <li class="sidebar-item" role="menuitem" tabindex="0">
                <i class="ri-layout-grid-fill" aria-hidden="true"></i> 
                <span>Início</span>
            </li>
            <li class="sidebar-item" role="menuitem" tabindex="0">
                <i class="ri-projector-fill" aria-hidden="true"></i> 
                <span>Plano de Ação</span>
            </li>
            <li class="sidebar-item active" role="menuitem" tabindex="0" aria-current="page">
                <i class="ri-bar-chart-fill" aria-hidden="true"></i> 
                <span>Indicadores</span>
            </li>
            <li class="sidebar-item" role="menuitem" tabindex="0">
                <i class="ri-team-fill" aria-hidden="true"></i> 
                <span>Equipe</span>
            </li>
            <li class="sidebar-item" role="menuitem" tabindex="0">
                <i class="ri-user-settings-line" aria-hidden="true"></i>
                <span>Permissões</span>
            </li>
        </ul>
        
        <!-- Dark Mode Toggle -->
        <div class="darkmode-container">
            <div class="darkmode-toggle-wrapper">
                <input type="checkbox" id="darkmode-toggle" aria-label="Alternar modo escuro" />
                <label for="darkmode-toggle">
                    <svg version="1.1" class="sun" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 496 496" style="enable-background:new 0 0 496 496;" xml:space="preserve">
                        <rect x="152.994" y="58.921" transform="matrix(0.3827 0.9239 -0.9239 0.3827 168.6176 -118.5145)" width="40.001" height="16" />
                        <rect x="46.9" y="164.979" transform="matrix(0.9239 0.3827 -0.3827 0.9239 71.29 -12.4346)" width="40.001" height="16" />
                        <rect x="46.947" y="315.048" transform="matrix(0.9239 -0.3827 0.3827 0.9239 -118.531 50.2116)" width="40.001" height="16" />
                        <rect x="164.966" y="409.112" transform="matrix(-0.9238 -0.3828 0.3828 -0.9238 168.4872 891.7491)" width="16" height="39.999" />
                        <rect x="303.031" y="421.036" transform="matrix(-0.3827 -0.9239 0.9239 -0.3827 50.2758 891.6655)" width="40.001" height="16" />
                        <rect x="409.088" y="315.018" transform="matrix(-0.9239 -0.3827 0.3827 -0.9239 701.898 785.6559)" width="40.001" height="16" />
                        <rect x="409.054" y="165.011" transform="matrix(-0.9239 0.3827 -0.3827 -0.9239 891.6585 168.6574)" width="40.001" height="16" />
                        <rect x="315.001" y="46.895" transform="matrix(0.9238 0.3828 -0.3828 0.9238 50.212 -118.5529)" width="16" height="39.999" />
                        <path d="M248,88c-88.224,0-160,71.776-160,160s71.776,160,160,160s160-71.776,160-160S336.224,88,248,88z M248,392
                            c-79.4,0-144-64.6-144-144s64.6-144,144-144s144,64.6,144,144S327.4,392,248,392z" />
                        <rect x="240" width="16" height="72" />
                        <rect x="62.097" y="90.096" transform="matrix(0.7071 0.7071 -0.7071 0.7071 98.0963 -40.6334)" width="71.999" height="16" />
                        <rect y="240" width="72" height="16" />
                        <rect x="90.091" y="361.915" transform="matrix(-0.7071 -0.7071 0.7071 -0.7071 -113.9157 748.643)" width="16" height="71.999" />
                        <rect x="240" y="424" width="16" height="72" />
                        <rect x="361.881" y="389.915" transform="matrix(-0.7071 -0.7071 0.7071 -0.7071 397.8562 960.6281)" width="71.999" height="16" />
                        <rect x="424" y="240" width="72" height="16" />
                        <rect x="389.911" y="62.091" transform="matrix(0.7071 0.7071 -0.7071 0.7071 185.9067 -252.6357)" width="16" height="71.999" />
                    </svg>
                    <svg version="1.1" class="moon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49.739 49.739" style="enable-background:new 0 0 49.739 49.739;" xml:space="preserve">
                        <path d="M25.068,48.889c-9.173,0-18.017-5.06-22.396-13.804C-3.373,23.008,1.164,8.467,13.003,1.979l2.061-1.129l-0.615,2.268
                        c-1.479,5.459-0.899,11.25,1.633,16.306c2.75,5.493,7.476,9.587,13.305,11.526c5.831,1.939,12.065,1.492,17.559-1.258v0
                        c0.25-0.125,0.492-0.258,0.734-0.391l2.061-1.13l-0.585,2.252c-1.863,6.873-6.577,12.639-12.933,15.822
                        C32.639,48.039,28.825,48.888,25.068,48.889z M12.002,4.936c-9.413,6.428-12.756,18.837-7.54,29.253
                        c5.678,11.340,19.522,15.945,30.864,10.268c5.154-2.582,9.136-7.012,11.181-12.357c-5.632,2.427-11.882,2.702-17.752,0.748
                        c-6.337-2.108-11.473-6.557-14.463-12.528C11.899,15.541,11.110,10.16,12.002,4.936z" />
                    </svg>
                </label>
            </div>
            <span>Modo Escuro</span>
        </div>
        
        <!-- Enhanced Profile Card -->
        <div class="profile-card-container">
            <div class="profile-card">
                <div class="avatar">RC</div>
                <div class="user-info">
                    <div class="user-name">Ricardo Costa</div>
                    <div class="user-role">Administrador</div>
                </div>
                <div class="vertical-line"></div>
                <div class="arrow-icon">
                    <i class="ri-arrow-right-s-line"></i>
                </div>
            </div>
        </div>
        
        <!-- Collapse Toggle - ÍCONE AJUSTADO PARA ESTADO INICIAL COLAPSADO -->
        <div class="collapse-toggle" id="collapseToggle" aria-label="Expandir menu lateral">
            <i class="ri-arrow-right-s-line" id="collapseIcon"></i>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content" role="main">
        <!-- Header -->
        <div class="header">
            <div class="header-info">
                <h1>Indicadores</h1>
                <p>Acompanhe e gerencie os indicadores estratégicos da sua organização</p>
            </div>
            <div class="header-actions">
                <div class="action-btn">
                    <i class="ri-notification-3-line"></i>
                    <div class="notification-badge">3</div>
                </div>
                <div class="action-btn">
                    <i class="ri-mail-line"></i>
                    <div class="notification-badge">7</div>
                </div>
            </div>
        </div>

        <!-- Indicators Area -->
        <div class="indicators-wrapper">
            <!-- Dynamic Department Title -->
            <h2 class="department-title" id="departmentTitle">Todos os Departamentos</h2>

            <!-- Filters Section -->
            <div class="filters-section">
                <div class="filters-row">
                    <div class="filter-group">
                        <label for="filterResponsavel">Filtrar por Responsável</label>
                        <select id="filterResponsavel" aria-label="Filtrar indicadores por responsável">
                            <option value="">Todos os Responsáveis</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterIndicador">Filtrar por Indicador</label>
                        <select id="filterIndicador" aria-label="Filtrar por nome do indicador">
                            <option value="">Todos os Indicadores</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterDepartamento">Filtrar por Departamento</label>
                        <select id="filterDepartamento" aria-label="Filtrar indicadores por departamento">
                            <option value="">Todos os Departamentos</option>
                        </select>
                    </div>
                    <button class="btn-clear" id="clearFilters" aria-label="Limpar todos os filtros">
                        <i class="ri-close-line" aria-hidden="true"></i> Limpar Filtros
                    </button>
                </div>
            </div>

            <!-- Table Container -->
            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Lista de Indicadores</h3>
                    <div class="table-actions">
                        <button class="btn-primary" id="addIndicatorBtn" aria-label="Adicionar novo indicador">
                            <i class="ri-add-line" aria-hidden="true"></i> Novo Indicador
                        </button>
                    </div>
                </div>

                <div class="table-wrapper">
                    <table id="indicatorsTable" role="table" aria-label="Tabela de indicadores">
                        <thead>
                            <tr role="row">
                                <th role="columnheader">Responsável</th>
                                <th role="columnheader">Indicador</th>
                                <th role="columnheader">Departamento</th>
                                <th role="columnheader">Data de Criação</th>
                                <th role="columnheader">Status</th>
                                <th role="columnheader">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="indicatorsTableBody">
                            <!-- Table content will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Enhanced Modal for Adding/Editing Indicators -->
    <div class="modal" id="indicatorModal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Novo Indicador</h2>
                <button class="modal-close" id="modalClose" aria-label="Fechar modal">
                    <i class="ri-close-line" aria-hidden="true"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="indicatorForm" novalidate>
                    <input type="hidden" id="indicatorId">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="indicatorName">Nome do Indicador *</label>
                            <input type="text" id="indicatorName" required aria-required="true" aria-describedby="indicatorName-error">
                            <div id="indicatorName-error" class="sr-only" role="alert"></div>
                        </div>
                        <div class="form-group">
                            <label for="indicatorResponsible">Responsável *</label>
                            <select id="indicatorResponsible" required aria-required="true" aria-describedby="indicatorResponsible-error">
                                <option value="">Selecione um responsável</option>
                            </select>
                            <div id="indicatorResponsible-error" class="sr-only" role="alert"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="indicatorDepartment">Departamento *</label>
                            <select id="indicatorDepartment" required aria-required="true" aria-describedby="indicatorDepartment-error">
                                <option value="">Selecione um departamento</option>
                            </select>
                            <div id="indicatorDepartment-error" class="sr-only" role="alert"></div>
                        </div>
                        <div class="form-group">
                            <label for="indicatorType">Tipo de Meta *</label>
                            <select id="indicatorType" required aria-required="true" aria-describedby="indicatorType-error">
                                <option value="">Selecione o tipo</option>
                            </select>
                            <div id="indicatorType-error" class="sr-only" role="alert"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="indicatorScope">Alcance *</label>
                            <select id="indicatorScope" required aria-required="true" aria-describedby="indicatorScope-error">
                                <option value="">Selecione o alcance</option>
                            </select>
                            <div id="indicatorScope-error" class="sr-only" role="alert"></div>
                        </div>
                        <div class="form-group">
                            <label for="indicatorPeriod">Período *</label>
                            <select id="indicatorPeriod" required aria-required="true" aria-describedby="indicatorPeriod-error">
                                <option value="">Selecione o período</option>
                            </select>
                            <div id="indicatorPeriod-error" class="sr-only" role="alert"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="indicatorStatus">Status *</label>
                            <select id="indicatorStatus" required aria-required="true" aria-describedby="indicatorStatus-error">
                                <option value="">Selecione o status</option>
                            </select>
                            <div id="indicatorStatus-error" class="sr-only" role="alert"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="indicatorDescription">Descrição</label>
                            <textarea id="indicatorDescription" placeholder="Descreva o indicador e seus objetivos..." aria-describedby="indicatorDescription-help"></textarea>
                            <div id="indicatorDescription-help" class="sr-only">Campo opcional para descrição detalhada do indicador</div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-secondary" id="cancelBtn">Cancelar</button>
                <button type="submit" class="btn-primary" id="saveBtn" form="indicatorForm">
                    <span id="saveButtonText">Salvar Indicador</span>
                    <div class="loading-spinner" id="saveButtonSpinner" style="display: none;"></div>
                </button>
            </div>
        </div>
    </div>

    <script src="../js/indicadores.js"></script>
</body>
</html>

